// Bootstrap & FontAwesome
@use "bootstrap/dist/css/bootstrap.min.css";
@use "@fortawesome/fontawesome-free/css/all.min.css";

// HappyNotes Design System
@use 'variables' as *;
@use 'utilities' as *;
@use 'buttons' as *;
@use 'cards' as *;
@use 'forms' as *;

// Logo styles
img.logo {
    max-width: $logo-size;
    animation: happy-bounce-app 1.3s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
    cursor: pointer;

    &:hover {
        animation: spin-zoom-app 0.6s ease-out forwards;
    }
}

img.logo-sm {
    max-width: $logo-size-sm;
}

@keyframes happy-bounce-app {
    0%, 100% {
        transform: translateY(0) scale(1);
    }
    50% {
        transform: translateY(-15px) scale(1.05);
    }
}

@keyframes spin-zoom-app {
    0% {
        transform: translateY(0) rotate(0deg) scale(1);
    }
    100% {
        transform: translateY(0) rotate(360deg) scale(1.15);
    }
}

// Navbar logo with subtle hover effect
.navbar-logo {
    transition: transform $transition-base;
    cursor: pointer;

    &:hover {
        transform: rotate(5deg) scale(1.1);
    }
}

// Empty state logo with bounce animation
.empty-state-logo {
    animation: gentle-bounce 1.3s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
    cursor: pointer;

    &:hover {
        animation: spin-zoom-logo 0.6s ease-out forwards;
    }
}

@keyframes gentle-bounce {
    0%, 100% {
        transform: translateY(0) scale(1);
    }
    50% {
        transform: translateY(-15px) scale(1.05);
    }
}

@keyframes spin-zoom-logo {
    0% {
        transform: translateY(0) rotate(0deg) scale(1);
    }
    100% {
        transform: translateY(0) rotate(360deg) scale(1.15);
    }
}

// Base elements
html,
body {
    background-color: $background;
    font-family: $font-family;
    font-size: $font-size-base;
    line-height: $line-height-base;
    color: $text-primary;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

h1, h2, h3, h4, h5, h6 {
    font-weight: $font-weight-bold;
    line-height: $line-height-tight;
    color: $text-primary;
    margin-bottom: $space-4;
}

h1 { font-size: $font-size-3xl; }
h2 { font-size: $font-size-2xl; }
h3 { font-size: $font-size-xl; }
h4 { font-size: $font-size-lg; }
h5, h6 { font-size: $font-size-base; }

p {
    font-size: $font-size-base;
    line-height: $line-height-relaxed;
    word-break: break-word;
    margin-bottom: $space-4;
}

// Emoji styles
.emoji {
    font-size: $emoji-size;
    line-height: 1;
    display: inline-block;
    transition: transform $transition-fast;
}

.emoji-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: $space-3;
    align-items: center;

    .emoji {
        font-size: $emoji-size;
        cursor: pointer;

        &:hover {
            transform: scale(1.1);
        }
    }
}

.emoji-wrapper-xl .emoji {
    font-size: $emoji-size-lg;
}

.emoji-wrapper-sm .emoji {
    font-size: $emoji-size-sm;
}

.emoji-wrapper-left {
    justify-content: flex-start;
    text-align: left;
}

// Emoji grid for selector
.emoji-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
    gap: $space-2;
    max-width: 100%;

    @media (min-width: $breakpoint-sm) {
        grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
    }

    @media (min-width: $breakpoint-md) {
        grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
    }
}

.emoji-selector {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    max-width: 100%;
    overflow: hidden;
}

// Notes list
.notes-list {
    display: flex;
    flex-direction: column;
    gap: 0;
}

// Empty state
.empty-state {
    text-align: center;
    padding: $space-12 $space-6;

    .empty-state-icon {
        font-size: 120px;
        line-height: 1;
        margin-bottom: $space-6;
        animation: bounce 1.3s cubic-bezier(0.34, 1.56, 0.64, 1) infinite;
        cursor: pointer;

        &:hover {
            animation: spin-zoom-icon 0.6s ease-out forwards;
        }
    }

    .empty-state-title {
        font-size: $font-size-2xl;
        font-weight: $font-weight-bold;
        color: $text-primary;
        margin-bottom: $space-3;
    }

    .empty-state-subtitle {
        font-size: $font-size-base;
        color: $text-secondary;
        margin-bottom: $space-6;
    }
}

@keyframes bounce {
    0%, 100% {
        transform: translateY(0) scale(1);
    }
    50% {
        transform: translateY(-15px) scale(1.05);
    }
}

@keyframes spin-zoom-icon {
    0% {
        transform: translateY(0) rotate(0deg) scale(1);
    }
    100% {
        transform: translateY(0) rotate(360deg) scale(1.2);
    }
}

// Fixed button wrapper (voor gradient fade)
.fixed-button-wrapper {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, rgba(255, 254, 249, 1) 70%, transparent);
    padding: 16px 0 20px;
    z-index: 100;
}

// Note detail header
.note-detail-title {
    font-size: $font-size-3xl;
    font-weight: $font-weight-bold;
    margin-bottom: $space-4;
    transition: transform $transition-fast;
}

// Navbar styles
#main-navbar {
    position: relative;
    background: transparent;
    padding: $space-4 0;
    margin-bottom: $space-2;
    transition: all $transition-base;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;

    .navbar-inner {
        padding: 0 $space-3; // Match note card padding for consistent alignment
        margin: 0;
    }

    i, a, .emoji {
        font-size: 24px;
        margin: 0;
        transition: all $transition-base;
    }

    a, button {
        color: $text-tertiary;
        cursor: pointer;
        text-decoration: none;
        padding: 10px;
        border-radius: $radius-full;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 44px;
        min-height: 44px;
        position: relative;

        @media (hover: hover) {
            &:hover {
                color: $text-primary;
                background: rgba($primary, 0.15);
                transform: translateY(-2px) scale(1.05);
                box-shadow:
                    0 0 0 2px rgba($primary, 0.2),
                    0 4px 12px rgba($primary, 0.25);

                i {
                    transform: scale(1.15);
                    filter: drop-shadow(0 2px 4px rgba($primary, 0.3));
                }

                .emoji {
                    transform: scale(1.15);
                    filter: drop-shadow(0 2px 4px rgba($primary, 0.3));
                }
            }
        }

        &:active {
            transform: translateY(0) scale(1);
            box-shadow:
                0 0 0 2px rgba($primary, 0.3),
                0 2px 6px rgba($primary, 0.2);
        }

        &.active {
            color: $primary-dark;
            background: rgba($primary, 0.12);
            box-shadow: 0 0 0 2px rgba($primary, 0.15);
        }
    }

    button {
        padding: 10px;
        background: none;
        border: none;
    }

    .emoji-wrapper {
        margin: 0;
        display: flex !important;
        flex-direction: row !important;
        align-items: center;
        gap: $space-2;
        flex-wrap: nowrap;

        a, button {
            flex-shrink: 0;
            display: flex;
            gap: $space-2;
            align-items: center;
        }

        form {
            margin: 0;

            button {
                padding: 10px;
            }
        }

        .emoji {
            margin: 0;
        }
    }

    // Remove old negative margin code - now using navbar-inner padding for consistent alignment
}

// List group modernization
.list-group {
    display: flex;
    flex-direction: column;
    gap: $space-3;
    padding: 0;
    list-style: none;
}

.list-group-item {
    background: rgba($surface, 0.3);
    border: 1px solid $border;
    border-radius: $radius-md;
    padding: $space-4;
    font-weight: $font-weight-bold;
    transition: all $transition-base;
    cursor: pointer;

    &:hover {
        transform: translateY(-2px);
        box-shadow: $shadow-hover;
        border-color: $primary;
        background: rgba($surface, 0.5);
    }
}

a .list-group-item {
    font-weight: $font-weight-normal;
    text-decoration: none;
}

// App container
#app {
    font-family: $font-family;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-align: left;
    color: $text-primary;
    padding-top: $space-2;
    padding-bottom: $space-6;
    min-height: 100vh;
}

// Menu styles
#menu {
    .fa {
        color: $text-tertiary;
        transition: color $transition-fast;
    }

    .list-group-item {
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        gap: $space-2;

        &:hover .fa {
            color: $text-primary;
        }
    }
}

// Links
a {
    text-decoration: none;
    color: $text-secondary;
    transition: color $transition-fast;

    &:hover {
        color: $primary-dark;
    }
}

.list-group a {
    text-decoration: none;
}

// Progress bar (modern)
.progress {
    height: 6px;
    background: $border;
    border-radius: $radius-full;
    overflow: hidden;
    margin-top: $space-2;
    margin-bottom: $space-2;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, $primary 0%, $secondary 100%);
    border-radius: $radius-full;
    transition: width $transition-slow;
}

// Table of Contents
#toc-container {
    padding-top: $space-6;

    ul {
        padding: 0;
        padding-left: $space-6;
        list-style: none;

        li {
            margin-bottom: $space-2;

            &:before {
                content: "â€¢";
                color: $primary;
                font-weight: bold;
                display: inline-block;
                width: 1em;
                margin-left: -1em;
            }
        }
    }

    #toc a {
        cursor: pointer;
        text-decoration: none;
        color: $text-primary;
        font-weight: $font-weight-medium;
        transition: color $transition-fast;

        &:hover {
            color: $primary-dark;
            text-decoration: underline;
        }
    }
}

// Notification badge
.notifiation-badge {
    top: 5px !important;
    left: 28px !important;
    background: $secondary !important;
}

// Dark mode
@media (prefers-color-scheme: dark) {
    html,
    body,
    #app {
        background-color: $dark-bg;
        color: $dark-text;
    }

    h1, h2, h3, h4, h5, h6 {
        color: $dark-text;
    }

    #main-navbar {
        background: transparent;

        a, button {
            color: $dark-text-secondary;

            &:hover {
                color: $dark-text;
                background: rgba($primary, 0.15);
                box-shadow:
                    0 0 0 2px rgba($primary, 0.25),
                    0 4px 12px rgba($primary, 0.3);

                i {
                    filter: drop-shadow(0 2px 4px rgba($primary, 0.4));
                }

                .emoji {
                    filter: drop-shadow(0 2px 4px rgba($primary, 0.4));
                }
            }

            &:active {
                box-shadow:
                    0 0 0 2px rgba($primary, 0.35),
                    0 2px 6px rgba($primary, 0.25);
            }

            &.active {
                color: $primary;
                background: rgba($primary, 0.12);
                box-shadow: 0 0 0 2px rgba($primary, 0.2);
            }
        }
    }

    .list-group-item {
        background: rgba($dark-surface, 0.3);
        color: $dark-text;
        border-color: $dark-border;

        &:hover {
            border-color: $primary;
            background: rgba($dark-surface, 0.5);
        }
    }

    #editorjs {
        background-color: transparent;
        color: $dark-text;
    }

    hr {
        border-color: $dark-border;
    }

    .emoji-wrapper {
        background-color: transparent;
    }

    .empty-state {
        .empty-state-title {
            color: $dark-text;
        }

        .empty-state-subtitle {
            color: $dark-text-secondary;
        }
    }

    a {
        color: $dark-text-secondary;

        &:hover,
        &:active,
        &.active {
            color: $primary !important;
        }
    }

    #menu {
        .fa {
            color: $dark-text-secondary;
        }

        .list-group-item {
            color: $dark-text;

            form button {
                color: $dark-text;
            }
        }
    }

    .progress {
        background-color: $dark-border;
    }

    #toc-container #toc a {
        color: $dark-text;

        &:hover {
            color: $primary;
        }
    }

    .fixed-button-wrapper {
        background: linear-gradient(to top, rgba(10, 10, 10, 1) 70%, transparent);
    }
}
